---
- name: install desktop packages
  community.general.xbps:
    name: '{{ item }}'
    update_cache: false
  loop:
    # DE
    - wl-clipboard # clipboard manager
    - kdesu
    - kdegraphics-thumbnailers
    - ffmpegthumbs
    - noto-fonts-ttf # unicode font
    - noto-fonts-emoji # emojis
    - dejavu-fonts-ttf # fonts
    - font-awesome5 # Icon font
    - font-awesome6 # Icon font
    - onedrive
    # Video
    - mesa # DRI 3D acceleration
    - mesa-dri # DRI 3D acceleration
    - mesa-demos # glxgears command
    - intel-media-driver # intel driver iHD
    - intel-video-accel
    - intel-gpu-tools
    - libva-utils # hardware video acceleration
    - mesa-vaapi
    - gstreamer-vaapi
    - gst-plugins-base1
    - gst-plugins-bad1
    - gst-plugins-good1
    - gst-plugins-ugly1
    - gst-plugins-rs1
    # Graphical apps
    - gearlever # to handle appimages
    - mpv # video player
    - vlc # video player
    - youtube-dl
    - strawberry # audio player
    - milkytracker # fast tracker clone
    - keepassxc # password manager

- name: install kde applications
  community.general.xbps:
    name: '{{ item }}'
    update_cache: false
  when: install_kde_apps
  loop:
    - ark # KDE archiver
    - okular # pdf editor, no img
    - spectacle # screenshots utility
    - nomacs # image viewer
    - filelight # disk usage analyzer
    - plasma-firewall # ufw gui
    - kdiff3 # compare files and directories

- name: install xfce applications
  community.general.xbps:
    name: '{{ item }}'
    update_cache: false
  when: install_xfce_apps
  loop:
    - xfce4-appfinder
    - xfce4-battery-plugin
    - xfce4-cpufreq-plugin
    - xfce4-cpugraph-plugin
    - xfce4-docklike-plugin
    - xfce4-genmon-plugin
    - xfce4-places-plugin
    - xfce4-power-manager
    - xfce4-sensors-plugin
    - xfce4-screenshooter
    - xfce4-session
    - xfce4-systemload-plugin
    - xfce4-timer-plugin
    - xfce4-whiskermenu-plugin
    - xfwm4-themes
    - albatross-themes
    - bluebird-themes
    - blackbird-themes

- name: install power-profiles-daemon
  community.general.xbps:
    name: power-profiles-daemon
    update_cache: false
  notify: restart power-profiles-daemon

- name: download OneDrive GUI AppImage
  get_url:
    url: https://github.com/bpozdena/OneDriveGUI/releases/download/v1.2.1/OneDriveGUI-1.2.1-x86_64.AppImage
    dest: '/home/{{ user }}/Downloads'
    mode: 0755

- name: download KOReader AppImage
  get_url:
    url: https://github.com/koreader/koreader/releases/download/v2025.08/koreader-appimage-x86_64-linux-gnu-v2025.08.AppImage
    dest: '/home/{{ user }}/Downloads'
    mode: 0755

- name: download Heroic Games Launcher AppImage
  get_url:
    url: https://github.com/Heroic-Games-Launcher/HeroicGamesLauncher/releases/download/v2.18.1/Heroic-2.18.1-linux-x86_64.AppImage
    dest: '/home/{{ user }}/Downloads'
    mode: 0755
